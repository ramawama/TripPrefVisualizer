import*as e from"react";import t,{PrimeReactContext as n,localeOption as r}from"primereact/api";import{ComponentBase as a,useHandleStyle as o}from"primereact/componentbase";import{useMergeProps as i,usePrevious as c,useResizeListener as l,useMountEffect as u,useUpdateEffect as s}from"primereact/hooks";import{ChevronDownIcon as p}from"primereact/icons/chevrondown";import{ChevronLeftIcon as m}from"primereact/icons/chevronleft";import{ChevronRightIcon as f}from"primereact/icons/chevronright";import{ChevronUpIcon as d}from"primereact/icons/chevronup";import{Ripple as v}from"primereact/ripple";import{classNames as b,UniqueComponentId as h,DomHandler as g,ObjectUtils as y,IconUtils as x}from"primereact/utils";function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function I(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function S(e){var t=I(e,"string");return"symbol"===w(t)?t:String(t)}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e){if(Array.isArray(e))return E(e)}function O(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function P(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function j(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e){return C(e)||O(e)||P(e)||j()}function A(e){if(Array.isArray(e))return e}function D(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,c=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}function R(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(e,t){return A(e)||D(e,t)||P(e,t)||R()}var B=a.extend({defaultProps:{__TYPE:"Carousel",id:null,value:null,page:0,header:null,footer:null,style:null,className:null,itemTemplate:null,circular:!1,showIndicators:!0,showNavigators:!0,autoplayInterval:0,numVisible:1,numScroll:1,prevIcon:null,nextIcon:null,responsiveOptions:null,orientation:"horizontal",verticalViewPortHeight:"300px",contentClassName:null,containerClassName:null,indicatorsContentClassName:null,onPageChange:null,children:void 0},css:{classes:{root:function(e){var t=e.isVertical;return b("p-carousel p-component",{"p-carousel-vertical":t,"p-carousel-horizontal":!t})},container:"p-carousel-container",content:"p-carousel-content",indicators:"p-carousel-indicators p-reset",header:"p-carousel-header",footer:"p-carousel-footer",itemsContainer:"p-carousel-items-container",itemsContent:"p-carousel-items-content",previousButton:function(e){return b("p-carousel-prev p-link",{"p-disabled":e.isDisabled})},previousButtonIcon:"p-carousel-prev-icon",nextButton:function(e){return b("p-carousel-next p-link",{"p-disabled":e.isDisabled})},nextButtonIcon:"p-carousel-next-icon",indicator:function(e){return b("p-carousel-indicator",{"p-highlight":e.isActive})},indicatorButton:"p-link",itemCloned:function(e){var t=e.itemProps;return b(t.className,"p-carousel-item",{"p-carousel-item-active":t.active,"p-carousel-item-start":t.start,"p-carousel-item-end":t.end})},item:function(e){var t=e.itemProps;return b(t.className,"p-carousel-item",{"p-carousel-item-active":t.active,"p-carousel-item-start":t.start,"p-carousel-item-end":t.end})}},styles:"\n@layer primereact {\n    .p-carousel {\n        display: flex;\n        flex-direction: column;\n    }\n    \n    .p-carousel-content {\n        display: flex;\n        flex-direction: column;\n        overflow: auto;\n    }\n    \n    .p-carousel-prev,\n    .p-carousel-next {\n        align-self: center;\n        flex-grow: 0;\n        flex-shrink: 0;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        overflow: hidden;\n        position: relative;\n    }\n    \n    .p-carousel-container {\n        display: flex;\n        flex-direction: row;\n    }\n    \n    .p-carousel-items-content {\n        overflow: hidden;\n        width: 100%;\n    }\n    \n    .p-carousel-items-container {\n        display: flex;\n        flex-direction: row;\n    }\n    \n    .p-carousel-indicators {\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        flex-wrap: wrap;\n    }\n    \n    .p-carousel-indicator > button {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    \n    /* Vertical */\n    .p-carousel-vertical .p-carousel-container {\n        flex-direction: column;\n    }\n    \n    .p-carousel-vertical .p-carousel-items-container {\n        flex-direction: column;\n        height: 100%;\n    }\n    \n    /* Keyboard Support */\n    .p-items-hidden .p-carousel-item {\n        visibility: hidden;\n    }\n    \n    .p-items-hidden .p-carousel-item.p-carousel-item-active {\n        visibility: visible;\n    }\n}\n",inlineStyles:{itemsContent:function(e){return{height:e.height}}}}});function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){var r,a,o;r=e,o=n[t],(a=S(a=t))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=e.memo((function(t){var n=i(),r=t.ptm,a=t.cx,o=t.className&&"p-carousel-item-cloned"===t.className?"itemCloned":"item",c=t.template(t.item),l=n({className:a(o,{itemProps:t}),role:t.role,"aria-roledescription":t.ariaRoledescription,"aria-label":t.ariaLabel,"aria-hidden":t.ariaHidden,"data-p-carousel-item-active":t.active,"data-p-carousel-item-start":t.start,"data-p-carousel-item-end":t.end},r(o));return e.createElement("div",l,c)})),L=e.memo(e.forwardRef((function(a,w){var I=i(),S=e.useContext(n),E=B.getProps(a,S),C=T(e.useState(E.numVisible),2),O=C[0],P=C[1],j=T(e.useState(E.numScroll),2),A=j[0],D=j[1],R=T(e.useState(E.page*E.numScroll*-1),2),V=R[0],L=R[1],X=T(e.useState(E.page),2),_=X[0],U=X[1],Y=B.setMetaData({props:E,state:{numVisible:O,numScroll:A,totalShiftedItems:V,page:_}}),z=Y.ptm,J=Y.cx,K=Y.sx,F=Y.isUnstyled;o(B.css.styles,F,{name:"carousel"});var W=e.useRef(null),$=e.useRef(null),q=e.useRef(0),G=e.useRef(!!E.autoplayInterval),Q=e.useRef(""),Z=e.useRef(20),ee=e.useRef(null),te=e.useRef(null),ne=e.useRef(null),re=e.useRef(null),ae=e.useRef(!1),oe=e.useRef(null),ie=c(A),ce=c(O),le=c(E.value),ue=c(E.page),se="vertical"===E.orientation,pe=E.circular||!!E.autoplayInterval,me=pe&&E.value&&E.value.length>=O,fe=E.value?Math.max(Math.ceil((E.value.length-O)/A)+1,0):0,de=fe&&E.autoplayInterval&&G.current,ve=E.onPageChange&&!de,be=ve?E.page:_,he=T(l({listener:function(){ye()},when:E.responsiveOptions}),1)[0],ge=function(e,t){var n=V;null!=t?(n=A*t*-1,me&&(n-=O),ae.current=!1):(n+=A*e,ae.current&&(n+=q.current-A*e,ae.current=!1),t=Math.abs(Math.floor((me?n+O:n)/A)));me&&_===fe-1&&-1===e?(n=-1*(E.value.length+O),t=0):me&&0===_&&1===e?(n=0,t=fe-1):t===fe-1&&q.current>0&&(n+=-1*q.current-A*e,ae.current=!0),$.current&&(!F()&&g.removeClass($.current,"p-items-hidden"),Le(n),$.current.style.transition="transform 500ms ease 0s"),Xe(t),L(n)},ye=function(){if($.current&&oe.current){for(var e=window.innerWidth,t={numVisible:E.numVisible,numScroll:E.numScroll},n=0;n<oe.current.length;n++){var r=oe.current[n];parseInt(r.breakpoint,10)>=e&&(t=r)}if(A!==t.numScroll){var a=Math.floor(be*A/t.numScroll),o=t.numScroll*a*-1;me&&(o-=t.numVisible),L(o),D(t.numScroll),Xe(a)}O!==t.numVisible&&P(t.numVisible)}},xe=function(e,t){(pe||0!==be)&&ge(1,t),G.current=!1,e.cancelable&&e.preventDefault()},we=function(e,t){(pe||be<fe-1)&&ge(-1,t),G.current=!1,e.cancelable&&e.preventDefault()},Ie=function(e,t){t>be?we(e,t):t<be&&xe(e,t)},Se=function(e){$.current&&"transform"===e.propertyName&&(g.addClass($.current,"p-items-hidden"),$.current.style.transition="",0!==_&&_!==fe-1||!me||Le(V))},Ne=function(e){var t=e.changedTouches[0];ee.current={x:t.pageX,y:t.pageY}},Ee=function(e){e.cancelable&&e.preventDefault()},Ce=function(e){var t=e.changedTouches[0];Oe(e,se?t.pageY-ee.current.y:t.pageX-ee.current.x)},Oe=function(e,t){Math.abs(t)>Z.current&&(t<0?we(e):xe(e))},Pe=function(e){switch(e.code){case"ArrowRight":je();break;case"ArrowLeft":ke();break;case"Home":Ae(),e.preventDefault();break;case"End":De(),e.preventDefault();break;case"ArrowUp":case"ArrowDown":e.preventDefault();break;case"Tab":Re()}},je=function(){var e=k(g.find(re.current,'[data-pc-section="indicator"]')),t=Te();Be(t,t+1===e.length?e.length-1:t+1)},ke=function(){var e=Te();Be(e,e-1<=0?0:e-1)},Ae=function(){var e=Te();Be(e,0)},De=function(){var e=k(g.find(re.current,'[data-pc-section="indicator"]r')),t=Te();Be(t,e.length-1)},Re=function(){var e=k(g.find(re.current,'[data-pc-section="indicator"]')),t=e.findIndex((function(e){return!0===g.getAttribute(e,"data-p-highlight")})),n=g.findSingle(re.current,'[data-pc-section="indicator"] > button[tabindex="0"]'),r=e.findIndex((function(e){return e===n.parentElement}));e[r].children[0].tabIndex="-1",e[t].children[0].tabIndex="0"},Te=function(){var e=k(g.find(re.current,'[data-pc-section="indicator"]')),t=g.findSingle(re.current,'[data-pc-section="indicator"] > button[tabindex="0"]');return e.findIndex((function(e){return e===t.parentElement}))},Be=function(e,t){var n=k(g.find(re.current,'[data-pc-section="indicator"]'));n[e].children[0].tabIndex="-1",n[t].children[0].tabIndex="0",n[t].children[0].focus()},Ve=function(){E.autoplayInterval>0&&(te.current=setInterval((function(){ge(-1,_===fe-1?0:_+1)}),E.autoplayInterval))},Me=function(){te.current&&clearInterval(te.current)},He=function(){ne.current||(ne.current=g.createInlineStyle(S&&S.nonce||t.nonce,S&&S.styleContainer));var e="\n            .p-carousel[".concat(Q.current,"] .p-carousel-item {\n                flex: 1 0 ").concat(100/O,"%\n            }\n        ");if(E.responsiveOptions){var n=y.localeComparator(S&&S.locale||t.locale);oe.current=k(E.responsiveOptions),oe.current.sort((function(e,r){return y.sort(e.breakpoint,r.breakpoint,-1,n,S&&S.nullSortOrder||t.nullSortOrder)}));for(var r=0;r<oe.current.length;r++){var a=oe.current[r];e+="\n                    @media screen and (max-width: ".concat(a.breakpoint,") {\n                        .p-carousel[").concat(Q.current,"] .p-carousel-item {\n                            flex: 1 0 ").concat(100/a.numVisible,"%\n                        }\n                    }\n                ")}ye()}ne.current.innerHTML=e},Le=function(e){$.current&&($.current.style.transform=se?"translate3d(0, ".concat(e*(100/O),"%, 0)"):"translate3d(".concat(e*(100/O),"%, 0, 0)"))},Xe=function(e){!ve&&U(e),E.onPageChange&&E.onPageChange({page:e})};e.useImperativeHandle(w,(function(){return{props:E,startAutoplay:Ve,stopAutoplay:Me,getElement:function(){return W.current}}})),u((function(){W.current&&(Q.current=h(),W.current.setAttribute(Q.current,"")),ne.current||(ye(),Le(V),he())})),s((function(){var e=!1,t=V;if(He(),E.autoplayInterval&&Me(),ie!==A||ce!==O||E.value&&le&&le.length!==E.value.length){q.current=(E.value.length-O)%A;var n=be;0!==fe&&n>=fe&&(Xe(n=fe-1),e=!0),t=n*A*-1,me&&(t-=O),n===fe-1&&q.current>0?(t+=-1*q.current+A,ae.current=!0):ae.current=!1,t!==V&&(L(t),e=!0),Le(t)}return me&&(0===_?t=-1*O:0===t&&(t=-1*E.value.length,q.current>0&&(ae.current=!0)),t!==V&&(L(t),e=!0)),ue!==E.page&&(E.page>ue&&E.page<=fe-1?ge(-1,E.page):E.page<ue&&ge(1,E.page)),!e&&de&&Ve(),function(){E.autoplayInterval&&Me(),ne.current=g.removeInlineStyle(ne.current)}}));var _e,Ue,Ye,ze,Je,Ke,Fe,We=function(){if(E.value&&E.value.length){var t=null,n=null;if(me){var a=null;t=(a=E.value.slice(-1*O)).map((function(t,n){return e.createElement(H,{key:n+"_scloned",className:"p-carousel-item-cloned",template:E.itemTemplate,item:t,active:-1*V===E.value.length+O,start:0===n,end:n===a.length-1,ptm:z,cx:J})})),n=(a=E.value.slice(0,O)).map((function(t,n){return e.createElement(H,{key:n+"_fcloned",className:"p-carousel-item-cloned",template:E.itemTemplate,item:t,active:0===V,start:0===n,end:n===a.length-1,ptm:z,cx:J})}))}var o=E.value.map((function(t,n){var a,o=me?-1*(V+O):-1*V,i=o+O-1,c=o<=n&&i>=n,l=o===n,u=i===n,s=o>n||i<n||void 0,p=(a=n,r("aria")?r("aria").slideNumber.replace(/{slideNumber}/g,a):void 0),m=r("aria")?r("aria").slide:void 0;return e.createElement(H,{key:n,template:E.itemTemplate,item:t,active:c,start:l,ariaHidden:s,ariaLabel:p,ariaRoledescription:m,role:"group",end:u,ptm:z,cx:J})}));return e.createElement(e.Fragment,null,t,o,n)}},$e=function(){if(E.showNavigators){var t=(!pe||E.value&&E.value.length<O)&&0===be,n=I({className:J("previousButtonIcon")},z("previousButtonIcon")),a=x.getJSXIcon(se?E.prevIcon||e.createElement(d,n):E.prevIcon||e.createElement(m,n),M({},n),{props:E}),o=I({type:"button",className:J("previousButton",{isDisabled:t}),onClick:function(e){return xe(e)},disabled:t,"aria-label":r("aria")?r("aria").previousPageLabel:void 0,"data-pc-group-section":"navigator"},z("previousButton"));return e.createElement("button",o,a,e.createElement(v,null))}return null},qe=function(){if(E.showNavigators){var t=(!pe||E.value&&E.value.length<O)&&(be===fe-1||0===fe),n=I({className:J("nextButtonIcon")},z("nextButtonIcon")),a=x.getJSXIcon(se?E.nextIcon||e.createElement(p,n):E.nextIcon||e.createElement(f,n),M({},n),{props:E}),o=I({type:"button",className:J("nextButton",{isDisabled:t}),onClick:function(e){return we(e)},disabled:t,"aria-label":r("aria")?r("aria").nextPageLabel:void 0,"data-pc-group-section":"navigator"},z("nextButton"));return e.createElement("button",o,a,e.createElement(v,null))}return null},Ge=function(t){var n,a=be===t,o=function(e){return z(e,{context:{active:a}})},i=I({key:"carousel-indicator-"+t,className:J("indicator",{isActive:a}),"data-p-highlight":a},o("indicator")),c=I({type:"button",className:J("indicatorButton"),tabIndex:be===t?"0":"-1",onClick:function(e){return Ie(e,t)},"aria-label":(n=t+1,r("aria")?r("aria").pageLabel.replace(/{page}/g,n):void 0),"aria-current":be===t?"page":void 0},o("indicatorButton"));return e.createElement("li",i,e.createElement("button",c,e.createElement(v,null)))},Qe=(_e=We(),Ue=se?E.verticalViewPortHeight:"auto",Ye=$e(),ze=qe(),Je=I({className:J("itemsContent"),style:K("itemsContent",{height:Ue}),onTouchStart:function(e){return Ne(e)},onTouchMove:function(e){return Ee(e)},onTouchEnd:function(e){return Ce(e)}},z("itemsContent")),Ke=I({className:b(E.containerClassName,J("container")),"aria-live":G.current?"polite":"off"},z("container")),Fe=I({className:J("itemsContainer"),onTransitionEnd:Se},z("itemsContainer")),e.createElement("div",Ke,Ye,e.createElement("div",Je,e.createElement("div",N({ref:$},Fe),_e)),ze)),Ze=function(){if(E.showIndicators){for(var t=[],n=0;n<fe;n++)t.push(Ge(n));var r=I({ref:re,className:b(E.indicatorsContentClassName,J("indicators")),onKeyDown:Pe},z("indicators"));return e.createElement("ul",r,t)}return null}(),et=function(){if(E.header){var t=I({className:J("header")},z("header"));return e.createElement("div",t,E.header)}return null}(),tt=function(){if(E.footer){var t=I({className:J("footer")},z("footer"));return e.createElement("div",t,E.footer)}return null}(),nt=I({id:E.id,ref:W,className:b(E.className,J("root",{isVertical:se})),style:E.style,role:"region"},B.getOtherProps(E),z("root")),rt=I({className:b(E.contentClassName,J("content"))},z("content"));return e.createElement("div",nt,et,e.createElement("div",rt,Qe,Ze),tt)})));H.displayName="CarouselItem",L.displayName="Carousel";export{L as Carousel};
